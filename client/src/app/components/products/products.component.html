<div>
  <div
    class="example-container"
    [class.example-is-mobile]="mobileQuery.matches"
  >
    <mat-toolbar
      style="background-color: white; color: grey"
      class="example-toolbar"
    >
      <button mat-icon-button (click)="snav.toggle(); showCartIcon = false">
        <mat-icon>menu</mat-icon>
      </button>
      <h1 class="example-app-name">Supermarket App</h1>
      <button mat-icon-button class="ExitButton" (click)="SignOut()">
        <mat-icon>exit_to_app</mat-icon>
      </button>
    </mat-toolbar>

    <mat-sidenav-container
      class="example-sidenav-container ContainerMat"
      [style.marginTop.px]="mobileQuery.matches ? 56 : 0"
      autosize
    >
      <mat-sidenav
        class="Side"
        #snav
        opened
        [mode]="mobileQuery.matches ? 'over' : 'side'"
        [fixedInViewport]="mobileQuery.matches"
        fixedTopGap="56"
      >
        <mat-nav-list style="padding-top: 0px">
          <div *ngIf="user[0]?.role === 'admin'">
            <app-productAction
              [product]="productToUpdate"
              (updateProductEvent)="editProduct($event)"
              (addNewProductEvent)="addNewProduct($event)"
            >
            </app-productAction>
            <h1>
              {{ actionState }}
            </h1>
          </div>

          <div *ngIf="user[0]?.role === 'user'">
            <button
              class="cancelButton"
              mat-icon-button
              (click)="snav.toggle(); showCartIcon = true"
            >
              <mat-icon>cancel</mat-icon>
            </button>
            <app-cart
              [userId]="this.user[0]._id"
              [cartId]="this.cartId"
            ></app-cart>
          </div>
        </mat-nav-list>
      </mat-sidenav>

      <mat-sidenav-content style="overflow-x: hidden">
        <div *ngIf="showCartIcon === true" class="SideButton2">
          <mat-icon
            (click)="snav.toggle(); showCartIcon = false"
            class="CartIcon"
            >shopping_cart</mat-icon
          >
        </div>

        <app-slide-images></app-slide-images>

        <div style="margin-left: 300px" class="row">
          <h2 class="col-1 mt-3">
            <mat-icon>search</mat-icon>
          </h2>

          <mat-form-field class="example-full-width col-5 mr-5">
            <mat-label>search</mat-label>
            <input
              matInput
              placeholder="product name"
              [(ngModel)]="filterModel"
              (keyup)="getProducts(filterModel, 'title')"
            />
          </mat-form-field>
        </div>
        <div>
          <div class="row" style="margin-left: 220px">
            <a
              (click)="getProducts('All')"
              mat-flat-button
              class="col-1 mt-2"
              style="color: rgb(89, 152, 194); height: 100%"
              >All</a
            >
            <app-categories
              (categoryIdEvent)="getProducts($event, '_id')"
              class="col-5"
            ></app-categories>
          </div>
        </div>

        <div class="container">
          <div class="row">
            <app-product
              class="col-4 mt-5"
              *ngFor="let product of filterProducts"
              [product]="product"
              [cartId]="cartId"
              (updateProductEvent)="getProductDetails($event)"
              (AddItemsToCartEvent)="addItemsToCart($event)"
            ></app-product>
          </div>

          <div style="margin-top: 50px">
            <button (click)="prev()" mat-button>
              <mat-icon>navigate_before</mat-icon>Prev
            </button>
            <button (click)="next()" style="float: right" mat-button>
              Next <mat-icon>navigate_next</mat-icon>
            </button>
          </div>
        </div>
      </mat-sidenav-content>
    </mat-sidenav-container>
  </div>
</div>
